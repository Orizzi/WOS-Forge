// Manual calculation to verify Fire Crystal totals
const fireCrystalCosts = {
    'Furnace': {
        'F30': { '1': 132, '2': 132, '3': 132, '4': 132, 'toFC1': 132 },
        'FC1': { '1': 158, '2': 158, '3': 158, '4': 158, 'toFC2': 158 },
        'FC2': { '1': 238, '2': 238, '3': 238, '4': 238, 'toFC3': 238 },
        'FC3': { '1': 280, '2': 280, '3': 280, '4': 280, 'toFC4': 280 },
        'FC4': { '1': 335, '2': 335, '3': 335, '4': 335, 'toFC5': 335 },
        'FC5': { 'normal': { '1': 200, '2': 200, '3': 200, '4': 200, 'toFC6': 100 }, 'refine': { '1': 10, '2': 10, '3': 10, '4': 10, 'toFC6': 20 } },
        'FC6': { 'normal': { '1': 240, '2': 240, '3': 240, '4': 240, 'toFC7': 120 }, 'refine': { '1': 15, '2': 15, '3': 15, '4': 15, 'toFC7': 30 } },
        'FC7': { 'normal': { '1': 240, '2': 240, '3': 240, '4': 240, 'toFC8': 120 }, 'refine': { '1': 20, '2': 20, '3': 20, '4': 20, 'toFC8': 40 } },
        'FC8': { 'normal': { '1': 280, '2': 280, '3': 280, '4': 280, 'toFC9': 140 }, 'refine': { '1': 30, '2': 30, '3': 30, '4': 30, 'toFC9': 60 } },
        'FC9': { 'normal': { '1': 350, '2': 350, '3': 350, '4': 350, 'toFC10': 175 }, 'refine': { '1': 70, '2': 70, '3': 70, '4': 70, 'toFC10': 140 } },
        'FC10': { 'normal': { '1': 400, '2': 400, '3': 400, '4': 400 }, 'refine': { '1': 80, '2': 80, '3': 80, '4': 80 } }
    },
    'Embassy': {
        'F30': { '1': 33, '2': 33, '3': 33, '4': 33, 'toFC1': 33 },
        'FC1': { '1': 39, '2': 39, '3': 39, '4': 39, 'toFC2': 39 },
        'FC2': { '1': 59, '2': 59, '3': 59, '4': 59, 'toFC3': 59 },
        'FC3': { '1': 70, '2': 70, '3': 70, '4': 70, 'toFC4': 70 },
        'FC4': { '1': 83, '2': 83, '3': 83, '4': 83, 'toFC5': 83 },
        'FC5': { 'normal': { '1': 50, '2': 50, '3': 50, '4': 50, 'toFC6': 25 }, 'refine': { '1': 2, '2': 2, '3': 2, '4': 2, 'toFC6': 5 } },
        'FC6': { 'normal': { '1': 60, '2': 60, '3': 60, '4': 60, 'toFC7': 30 }, 'refine': { '1': 3, '2': 3, '3': 3, '4': 3, 'toFC7': 7 } },
        'FC7': { 'normal': { '1': 60, '2': 60, '3': 60, '4': 60, 'toFC8': 30 }, 'refine': { '1': 5, '2': 5, '3': 5, '4': 5, 'toFC8': 10 } },
        'FC8': { 'normal': { '1': 70, '2': 70, '3': 70, '4': 70, 'toFC9': 35 }, 'refine': { '1': 7, '2': 7, '3': 7, '4': 7, 'toFC9': 15 } },
        'FC9': { 'normal': { '1': 87, '2': 87, '3': 87, '4': 87, 'toFC10': 43 }, 'refine': { '1': 17, '2': 17, '3': 17, '4': 17, 'toFC10': 35 } },
        'FC10': { 'normal': { '1': 100, '2': 100, '3': 100, '4': 100 }, 'refine': { '1': 20, '2': 20, '3': 20, '4': 20 } }
    },
    'Command Center': {
        'F30': { '1': 26, '2': 26, '3': 26, '4': 26, 'toFC1': 26 },
        'FC1': { '1': 31, '2': 31, '3': 31, '4': 31, 'toFC2': 31 },
        'FC2': { '1': 47, '2': 47, '3': 47, '4': 47, 'toFC3': 47 },
        'FC3': { '1': 56, '2': 56, '3': 56, '4': 56, 'toFC4': 56 },
        'FC4': { '1': 67, '2': 67, '3': 67, '4': 67, 'toFC5': 67 },
        'FC5': { 'normal': { '1': 40, '2': 40, '3': 40, '4': 40, 'toFC6': 20 }, 'refine': { '1': 2, '2': 2, '3': 2, '4': 2, 'toFC6': 5 } },
        'FC6': { 'normal': { '1': 48, '2': 48, '3': 48, '4': 48, 'toFC7': 24 }, 'refine': { '1': 3, '2': 3, '3': 3, '4': 3, 'toFC7': 7 } },
        'FC7': { 'normal': { '1': 48, '2': 48, '3': 48, '4': 48, 'toFC8': 24 }, 'refine': { '1': 4, '2': 4, '3': 4, '4': 4, 'toFC8': 8 } },
        'FC8': { 'normal': { '1': 56, '2': 56, '3': 56, '4': 56, 'toFC9': 28 }, 'refine': { '1': 6, '2': 6, '3': 6, '4': 6, 'toFC9': 12 } },
        'FC9': { 'normal': { '1': 70, '2': 70, '3': 70, '4': 70, 'toFC10': 35 }, 'refine': { '1': 14, '2': 14, '3': 14, '4': 14, 'toFC10': 28 } },
        'FC10': { 'normal': { '1': 80, '2': 80, '3': 80, '4': 80 }, 'refine': { '1': 16, '2': 16, '3': 16, '4': 16 } }
    },
    'Infirmary': {
        'F30': { '1': 26, '2': 26, '3': 26, '4': 26, 'toFC1': 26 },
        'FC1': { '1': 31, '2': 31, '3': 31, '4': 31, 'toFC2': 31 },
        'FC2': { '1': 47, '2': 47, '3': 47, '4': 47, 'toFC3': 47 },
        'FC3': { '1': 56, '2': 56, '3': 56, '4': 56, 'toFC4': 56 },
        'FC4': { '1': 67, '2': 67, '3': 67, '4': 67, 'toFC5': 67 },
        'FC5': { 'normal': { '1': 40, '2': 40, '3': 40, '4': 40, 'toFC6': 20 }, 'refine': { '1': 2, '2': 2, '3': 2, '4': 2, 'toFC6': 5 } },
        'FC6': { 'normal': { '1': 48, '2': 48, '3': 48, '4': 48, 'toFC7': 24 }, 'refine': { '1': 3, '2': 3, '3': 3, '4': 3, 'toFC7': 7 } },
        'FC7': { 'normal': { '1': 48, '2': 48, '3': 48, '4': 48, 'toFC8': 24 }, 'refine': { '1': 4, '2': 4, '3': 4, '4': 4, 'toFC8': 8 } },
        'FC8': { 'normal': { '1': 56, '2': 56, '3': 56, '4': 56, 'toFC9': 28 }, 'refine': { '1': 6, '2': 6, '3': 6, '4': 6, 'toFC9': 12 } },
        'FC9': { 'normal': { '1': 70, '2': 70, '3': 70, '4': 70, 'toFC10': 35 }, 'refine': { '1': 14, '2': 14, '3': 14, '4': 14, 'toFC10': 28 } },
        'FC10': { 'normal': { '1': 80, '2': 80, '3': 80, '4': 80 }, 'refine': { '1': 16, '2': 16, '3': 16, '4': 16 } }
    },
    'Infantry Camp': {
        'F30': { '1': 59, '2': 59, '3': 59, '4': 59, 'toFC1': 59 },
        'FC1': { '1': 71, '2': 71, '3': 71, '4': 71, 'toFC2': 71 },
        'FC2': { '1': 107, '2': 107, '3': 107, '4': 107, 'toFC3': 107 },
        'FC3': { '1': 126, '2': 126, '3': 126, '4': 126, 'toFC4': 126 },
        'FC4': { '1': 150, '2': 150, '3': 150, '4': 150, 'toFC5': 150 },
        'FC5': { 'normal': { '1': 90, '2': 90, '3': 90, '4': 90, 'toFC6': 90 }, 'refine': { '1': 4, '2': 4, '3': 4, '4': 4, 'toFC6': 9 } },
        'FC6': { 'normal': { '1': 108, '2': 108, '3': 108, '4': 108, 'toFC7': 54 }, 'refine': { '1': 6, '2': 6, '3': 6, '4': 6, 'toFC7': 13 } },
        'FC7': { 'normal': { '1': 108, '2': 108, '3': 108, '4': 108, 'toFC8': 54 }, 'refine': { '1': 9, '2': 9, '3': 9, '4': 9, 'toFC8': 18 } },
        'FC8': { 'normal': { '1': 126, '2': 126, '3': 126, '4': 126, 'toFC9': 63 }, 'refine': { '1': 13, '2': 13, '3': 13, '4': 13, 'toFC9': 26 } },
        'FC9': { 'normal': { '1': 157, '2': 157, '3': 157, '4': 157, 'toFC10': 78 }, 'refine': { '1': 31, '2': 31, '3': 31, '4': 31, 'toFC10': 63 } },
        'FC10': { 'normal': { '1': 180, '2': 180, '3': 180, '4': 180 }, 'refine': { '1': 36, '2': 36, '3': 36, '4': 36 } }
    },
    'Marksman Camp': {
        'F30': { '1': 59, '2': 59, '3': 59, '4': 59, 'toFC1': 59 },
        'FC1': { '1': 71, '2': 71, '3': 71, '4': 71, 'toFC2': 71 },
        'FC2': { '1': 107, '2': 107, '3': 107, '4': 107, 'toFC3': 107 },
        'FC3': { '1': 126, '2': 126, '3': 126, '4': 126, 'toFC4': 126 },
        'FC4': { '1': 150, '2': 150, '3': 150, '4': 150, 'toFC5': 150 },
        'FC5': { 'normal': { '1': 90, '2': 90, '3': 90, '4': 90, 'toFC6': 90 }, 'refine': { '1': 4, '2': 4, '3': 4, '4': 4, 'toFC6': 9 } },
        'FC6': { 'normal': { '1': 108, '2': 108, '3': 108, '4': 108, 'toFC7': 54 }, 'refine': { '1': 6, '2': 6, '3': 6, '4': 6, 'toFC7': 13 } },
        'FC7': { 'normal': { '1': 108, '2': 108, '3': 108, '4': 108, 'toFC8': 54 }, 'refine': { '1': 9, '2': 9, '3': 9, '4': 9, 'toFC8': 18 } },
        'FC8': { 'normal': { '1': 126, '2': 126, '3': 126, '4': 126, 'toFC9': 63 }, 'refine': { '1': 13, '2': 13, '3': 13, '4': 13, 'toFC9': 26 } },
        'FC9': { 'normal': { '1': 157, '2': 157, '3': 157, '4': 157, 'toFC10': 78 }, 'refine': { '1': 31, '2': 31, '3': 31, '4': 31, 'toFC10': 63 } },
        'FC10': { 'normal': { '1': 180, '2': 180, '3': 180, '4': 180 }, 'refine': { '1': 36, '2': 36, '3': 36, '4': 36 } }
    },
    'Lancer Camp': {
        'F30': { '1': 59, '2': 59, '3': 59, '4': 59, 'toFC1': 59 },
        'FC1': { '1': 71, '2': 71, '3': 71, '4': 71, 'toFC2': 71 },
        'FC2': { '1': 107, '2': 107, '3': 107, '4': 107, 'toFC3': 107 },
        'FC3': { '1': 126, '2': 126, '3': 126, '4': 126, 'toFC4': 126 },
        'FC4': { '1': 150, '2': 150, '3': 150, '4': 150, 'toFC5': 150 },
        'FC5': { 'normal': { '1': 90, '2': 90, '3': 90, '4': 90, 'toFC6': 90 }, 'refine': { '1': 4, '2': 4, '3': 4, '4': 4, 'toFC6': 9 } },
        'FC6': { 'normal': { '1': 108, '2': 108, '3': 108, '4': 108, 'toFC7': 54 }, 'refine': { '1': 6, '2': 6, '3': 6, '4': 6, 'toFC7': 13 } },
        'FC7': { 'normal': { '1': 108, '2': 108, '3': 108, '4': 108, 'toFC8': 54 }, 'refine': { '1': 9, '2': 9, '3': 9, '4': 9, 'toFC8': 18 } },
        'FC8': { 'normal': { '1': 126, '2': 126, '3': 126, '4': 126, 'toFC9': 63 }, 'refine': { '1': 13, '2': 13, '3': 13, '4': 13, 'toFC9': 26 } },
        'FC9': { 'normal': { '1': 157, '2': 157, '3': 157, '4': 157, 'toFC10': 78 }, 'refine': { '1': 31, '2': 31, '3': 31, '4': 31, 'toFC10': 63 } },
        'FC10': { 'normal': { '1': 180, '2': 180, '3': 180, '4': 180 }, 'refine': { '1': 36, '2': 36, '3': 36, '4': 36 } }
    },
    'War Academy': {
        'FC1': { '1': 71, '2': 71, '3': 71, '4': 71, 'toFC2': 71 },
        'FC2': { '1': 107, '2': 107, '3': 107, '4': 107, 'toFC3': 107 },
        'FC3': { '1': 126, '2': 126, '3': 126, '4': 126, 'toFC4': 126 },
        'FC4': { '1': 150, '2': 150, '3': 150, '4': 150, 'toFC5': 150 },
        'FC5': { 'normal': { '1': 90, '2': 90, '3': 90, '4': 90, 'toFC6': 45 }, 'refine': { '1': 4, '2': 4, '3': 4, '4': 4, 'toFC6': 9 } },
        'FC6': { 'normal': { '1': 108, '2': 108, '3': 108, '4': 108, 'toFC7': 54 }, 'refine': { '1': 6, '2': 6, '3': 6, '4': 6, 'toFC7': 13 } },
        'FC7': { 'normal': { '1': 108, '2': 108, '3': 108, '4': 108, 'toFC8': 54 }, 'refine': { '1': 9, '2': 9, '3': 9, '4': 9, 'toFC8': 18 } },
        'FC8': { 'normal': { '1': 126, '2': 126, '3': 126, '4': 126, 'toFC9': 63 }, 'refine': { '1': 13, '2': 13, '3': 13, '4': 13, 'toFC9': 26 } },
        'FC9': { 'normal': { '1': 157, '2': 157, '3': 157, '4': 157, 'toFC10': 78 }, 'refine': { '1': 31, '2': 31, '3': 31, '4': 31, 'toFC10': 63 } },
        'FC10': { 'normal': { '1': 180, '2': 180, '3': 180, '4': 180 }, 'refine': { '1': 36, '2': 36, '3': 36, '4': 36 } }
    }
};

console.log('=== MANUAL CALCULATION: F30 to FC10 ===\n');

function calcBuilding(name, data) {
    let totalFC = 0, totalRFC = 0;
    const levels = name === 'War Academy' 
        ? ['FC1', 'FC2', 'FC3', 'FC4', 'FC5', 'FC6', 'FC7', 'FC8', 'FC9', 'FC10']
        : ['F30', 'FC1', 'FC2', 'FC3', 'FC4', 'FC5', 'FC6', 'FC7', 'FC8', 'FC9', 'FC10'];
    
    console.log(`${name}:`);
    
    for (const lvl of levels) {
        const levelData = data[lvl];
        if (!levelData) continue;
        
        let fc = 0, rfc = 0;
        
        if (levelData.normal) {
            // FC5+ format
            fc = (levelData.normal['1'] || 0) + (levelData.normal['2'] || 0) + 
                 (levelData.normal['3'] || 0) + (levelData.normal['4'] || 0);
            rfc = (levelData.refine['1'] || 0) + (levelData.refine['2'] || 0) + 
                  (levelData.refine['3'] || 0) + (levelData.refine['4'] || 0);
            
            // Add transition cost if not FC10
            if (lvl !== 'FC10') {
                const nextNum = parseInt(lvl.slice(2)) + 1;
                fc += (levelData.normal['toFC' + nextNum] || 0);
                rfc += (levelData.refine['toFC' + nextNum] || 0);
            }
        } else {
            // F30-FC4 format
            fc = (levelData['1'] || 0) + (levelData['2'] || 0) + 
                 (levelData['3'] || 0) + (levelData['4'] || 0);
            
            // Add transition cost if not FC10
            if (lvl !== 'FC10') {
                const nextKey = lvl === 'F30' ? 'toFC1' : 'toFC' + (parseInt(lvl.slice(2)) + 1);
                fc += (levelData[nextKey] || 0);
            }
        }
        
        console.log(`  ${lvl}: FC=${fc}, RFC=${rfc}`);
        totalFC += fc;
        totalRFC += rfc;
    }
    
    console.log(`  TOTAL: FC=${totalFC}, RFC=${totalRFC}\n`);
    return { fc: totalFC, rfc: totalRFC };
}

const results = {};
let grandTotalFC = 0;
let grandTotalRFC = 0;

for (const building of Object.keys(fireCrystalCosts)) {
    results[building] = calcBuilding(building, fireCrystalCosts[building]);
    grandTotalFC += results[building].fc;
    grandTotalRFC += results[building].rfc;
}

console.log('====================================');
console.log('GRAND TOTALS (ALL 8 BUILDINGS):');
console.log('Fire Crystals:', grandTotalFC);
console.log('Refined Crystals:', grandTotalRFC);
console.log('====================================');
console.log('\nEXPECTED:');
console.log('Fire Crystals: 39694');
console.log('Refined Crystals: 2958');
console.log('\nDIFFERENCE:');
console.log('FC:', grandTotalFC - 39694);
console.log('RFC:', grandTotalRFC - 2958);
