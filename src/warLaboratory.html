<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WOSC - War Laboratory</title>
  <link rel="icon" href="../src/assets/app-icon.png">
  <link rel="stylesheet" href="style/style.css" />
  <script src="Scripts/theme.js" defer></script>
  <script src="Scripts/translations.js" defer></script>
  <script src="Scripts/nav.js" defer></script>
  <script src="Scripts/sw-register.js" defer></script>
  <!-- Data + helpers -->
  <script src="Scripts/modules/helpers/csv.js" defer></script>
  <script src="Scripts/modules/helpers/number-format.js" defer></script>
  <script src="Scripts/modules/data/data-loader.js" defer></script>
  <script src="Scripts/modules/data/helios-data.js" defer></script>
  <script src="Scripts/war-laboratory.js" defer></script>
</head>
<body>
  <div id="top"></div>
  <header class="header-with-nav" role="banner">
    <a href="../index.html" class="logo-link">
      <img src="../src/assets/wos-forge-banner.png" alt="WOS FORGE" class="site-logo">
    </a>
    <button class="nav-toggle" aria-expanded="false" aria-controls="main-nav" aria-label="Toggle navigation">&#9776;</button>
    <nav id="main-nav" class="main-nav" role="navigation" aria-label="Main navigation">
      <div class="nav-links">
        <a href="../index.html" data-i18n="nav-home">Home</a>
        <a href="charms.html" data-i18n="nav-charms">Charms</a>
        <a href="chiefGear.html" data-i18n="nav-chief-gear">Chief Gear</a>
        <a href="fireCrystals.html" data-i18n="nav-fire-crystals">Fire Crystals</a>
        <a href="warAcademy.html" data-i18n="nav-war-academy">War Academy</a>
        <a href="warLaboratory.html" data-i18n="nav-war-laboratory" aria-current="page">War Laboratory</a>
        <a href="pets.html" data-i18n="nav-pets">Pets</a>
        <a href="experts.html" data-i18n="nav-experts">Experts</a>
      </div>
      <div class="nav-actions">
        <button id="dark-mode-toggle" class="dark-mode-toggle" aria-pressed="false" title="Toggle dark/light Theme">T Theme</button>
        <select id="language-selector" aria-label="Language" title="Select language">
          <option value="en">English</option>
          <option value="es">Español</option>
          <option value="ko">한국어</option>
          <option value="ru">Русский</option>
        </select>
      </div>
    </nav>
  </header>

  <div class="app-shell">
    <main role="main">
      <section class="card" aria-labelledby="war-lab-title">
        <h1 id="war-lab-title">War Laboratory – Helios Research</h1>
        <p>
          Explore the Helios (Fire Crystal) research tree, pick start/end levels, and tally Fire Crystal, resources, time,
          power, SVS points, and stat gains. Icons mirror the in-game War Academy layout.
        </p>
        <div class="grid-2-col" style="gap:16px;align-items:start;">
          <div>
            <h2 class="section-title">Tree</h2>
            <div id="helios-tree" class="tree-surface" aria-label="Helios research tree"></div>
          </div>
          <div class="card" style="margin:0;">
            <h2 class="section-title">Selection</h2>
            <div id="selection-panel">
              <p>Select a node to edit its range.</p>
            </div>
            <h3 class="section-title">Active selections</h3>
            <ul id="selection-list" class="gift-code-log"></ul>
            <button id="reset-selections" class="secondary">Reset</button>
          </div>
        </div>
      </section>

      <section class="card" aria-labelledby="war-lab-summary">
        <h2 id="war-lab-summary">Summary</h2>
        <div id="summary-content" class="gift-code-result">
          <p class="gift-code-status-text" data-status="info">Select a node to view totals.</p>
          <div class="grid-2-col" style="gap:12px;">
            <div>
              <h4>Costs</h4>
              <ul id="costs-list" class="gift-code-log"></ul>
            </div>
            <div>
              <h4>Stats & Points</h4>
              <ul id="stats-list" class="gift-code-log"></ul>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <nav class="bottom-nav" aria-label="Mobile navigation">
    <ul class="bottom-nav__list">
      <li class="bottom-nav__item"><a href="../index.html">Home</a></li>
      <li class="bottom-nav__item"><a href="charms.html">Charms</a></li>
      <li class="bottom-nav__item"><a href="chiefGear.html">Chief Gear</a></li>
      <li class="bottom-nav__item"><a href="fireCrystals.html">Fire Crystals</a></li>
      <li class="bottom-nav__item"><a href="warLaboratory.html" aria-current="page" class="is-active">War Laboratory</a></li>
      <li class="bottom-nav__item"><a href="pets.html">Pets</a></li>
      <li class="bottom-nav__item"><a href="experts.html">Experts</a></li>
    </ul>
  </nav>
  <a href="#top" class="back-to-top" aria-label="Back to top">&uarr;</a>
  <script>
    document.addEventListener('DOMContentLoaded', function(){
      const active = document.querySelector('.bottom-nav__item a.is-active, .bottom-nav__item a[aria-current="page"]');
      if(active && active.scrollIntoView){
        active.scrollIntoView({behavior:'auto', inline:'center', block:'nearest'});
      }
    });
  </script>
</body>
</html>
