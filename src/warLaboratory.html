<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WOSC - War Academy</title>
  <link rel="icon" href="../src/assets/app-icon.png">
  <link rel="stylesheet" href="style/style.css" />
  <script src="Scripts/theme.js" defer></script>
  <script src="Scripts/translations.js" defer></script>
  <script src="Scripts/nav.js" defer></script>
  <script src="Scripts/sw-register.js" defer></script>
  <!-- Data + helpers -->
  <script src="Scripts/modules/helpers/csv.js" defer></script>
  <script src="Scripts/modules/helpers/number-format.js" defer></script>
  <script src="Scripts/modules/data/data-loader.js" defer></script>
  <script src="Scripts/modules/data/helios-data.js" defer></script>
  <script src="Scripts/war-laboratory.js" defer></script>
</head>
<body>
  <div id="top"></div>
  <header class="header-with-nav" role="banner">
    <a href="../index.html" class="logo-link">
      <img src="../src/assets/wos-forge-banner.png" alt="WOS FORGE" class="site-logo">
    </a>
    <button class="nav-toggle" aria-expanded="false" aria-controls="main-nav" aria-label="Toggle navigation">&#9776;</button>
    <nav id="main-nav" class="main-nav" role="navigation" aria-label="Main navigation">
      <div class="nav-links">
        <a href="../index.html" data-i18n="nav-home">Home</a>
        <a href="charms.html" data-i18n="nav-charms">Charms</a>
        <a href="chiefGear.html" data-i18n="nav-chief-gear">Chief Gear</a>
        <a href="fireCrystals.html" data-i18n="nav-fire-crystals">Fire Crystals</a>
        <a href="warLaboratory.html" data-i18n="nav-war-academy">War Academy</a>
        <a href="warLaboratory.html" data-i18n="nav-war-laboratory" aria-current="page">War Academy</a>
        <a href="pets.html" data-i18n="nav-pets">Pets</a>
        <a href="experts.html" data-i18n="nav-experts">Experts</a>
      </div>
      <div class="nav-actions">
        <button id="dark-mode-toggle" class="dark-mode-toggle" aria-pressed="false" title="Toggle dark/light Theme">T Theme</button>
        <select id="language-selector" aria-label="Language" title="Select language">
          <option value="en">English</option>
          <option value="es">Español</option>
          <option value="ko">한국어</option>
          <option value="ru">Русский</option>
        </select>
      </div>
    </nav>
  </header>

  <div class="app-shell">
    <main role="main">
      <section class="card" aria-labelledby="war-lab-title">
        <h1 id="war-lab-title">War Academy – Helios Research</h1>
        
        <div class="inventory-profiles-row">
          <section class="inventory-section card" aria-label="Helios Inventory">
            <h3>Your Inventory</h3>
            <div class="inventory-grid inventory-grid-2x4">
              <div class="inventory-item">
                <label><span class="label-with-icon"><img class="res-icon" src="assets/resources/base/meat.png" alt="Meat">Meat</span></label>
                <input type="number" id="inventory-meat" min="0" value="0" inputmode="numeric">
              </div>
              <div class="inventory-item">
                <label><span class="label-with-icon"><img class="res-icon" src="assets/resources/base/wood.png" alt="Wood">Wood</span></label>
                <input type="number" id="inventory-wood" min="0" value="0" inputmode="numeric">
              </div>
              <div class="inventory-item">
                <label><span class="label-with-icon"><img class="res-icon" src="assets/resources/base/coal.png" alt="Coal">Coal</span></label>
                <input type="number" id="inventory-coal" min="0" value="0" inputmode="numeric">
              </div>
              <div class="inventory-item">
                <label><span class="label-with-icon"><img class="res-icon" src="assets/resources/base/iron.png" alt="Iron">Iron</span></label>
                <input type="number" id="inventory-iron" min="0" value="0" inputmode="numeric">
              </div>
              <div class="inventory-item">
              <label><span class="label-with-icon"><img class="res-icon" src="assets/resources/base/fire-crystal-shards.png" alt="FCs">FCs</span></label>
                <input type="number" id="inventory-fc" min="0" value="0" inputmode="numeric">
              </div>
              <div class="inventory-item">
                <label><span class="label-with-icon"><img class="res-icon" src="assets/resources/base/steel.png" alt="Steel">Steel</span></label>
                <input type="number" id="inventory-steel" min="0" value="0" inputmode="numeric">
              </div>
              <div class="inventory-item">
              <label>Speedups (days)</label>
                <input type="number" id="inventory-speedups" min="0" value="0" inputmode="numeric" placeholder="minutes">
              </div>
              <div class="inventory-item">
                <label>Research % reduction</label>
                <input type="number" id="inventory-reduction" min="0" max="100" value="0" inputmode="numeric" placeholder="%">
              </div>
            </div>
          </section>

          <section class="card profiles" aria-label="Helios Profiles">
            <div class="profiles-header">
              <h3>Profiles</h3>
            </div>
            <div class="profiles-body">
              <select id="helios-profiles-list" aria-label="Saved profiles"></select>
              <input type="text" id="helios-profile-name" placeholder="Profile name" maxlength="20">
              <div class="profiles-actions">
                <button id="helios-profile-save" class="btn primary">Save</button>
                <button id="helios-profile-load" class="btn secondary">Load</button>
                <button id="helios-profile-delete" class="btn danger">Delete</button>
              </div>
            </div>
          </section>
        </div>

        <div class="layout-two-col" style="gap:16px;">
          <div class="trees-column">
            <div class="tab-row mobile-branch-nav" id="branch-tabs" role="tablist" aria-label="Helios branches">
              <button class="tab is-active" data-branch="marksman" role="tab" aria-selected="true">Marksman</button>
              <button class="tab" data-branch="infantry" role="tab" aria-selected="false">Infantry</button>
              <button class="tab" data-branch="lancer" role="tab" aria-selected="false">Lancer</button>
            </div>
            <div id="helios-tree" class="tree-surface" aria-label="Helios research tree"></div>
            <section class="card stat-recap-card" aria-label="Stat recap">
              <h3 class="section-title">Stat recap</h3>
              <div class="stat-grid" id="stat-recap-grid"></div>
            </section>
          </div>
          <div class="card results-card">
            <h2 class="section-title">Results</h2>
            <div id="summary-content" class="calculation-output">
              <p class="gift-code-status-text" data-status="info">Select a node to view totals.</p>
              <div id="costs-cards" class="result-grid"></div>
              <div class="result-totals" style="display:grid;grid-template-columns: repeat(auto-fit,minmax(220px,1fr));gap:12px;">
                <div class="summary-pill" id="power-pill">Total Power: 0</div>
                <div class="summary-pill" id="svs-pill">Total SvS Points: 0</div>
              </div>
              <div class="results-wrap results-table-wrapper" style="overflow:auto; max-height:260px;">
                <table class="results-table" id="recap-table">
                  <thead>
                    <tr>
                      <th>Slot</th>
                      <th>FROM</th>
                      <th>TO</th>
                      <th>FCs</th>
                      <th>Meat</th>
                      <th>Wood</th>
                      <th>Coal</th>
                      <th>Iron</th>
                      <th>Steel</th>
                      <th>Key stat</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                  <tfoot></tfoot>
                </table>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <nav class="bottom-nav" aria-label="Mobile navigation">
    <ul class="bottom-nav__list">
      <li class="bottom-nav__item"><a href="../index.html">Home</a></li>
      <li class="bottom-nav__item"><a href="charms.html">Charms</a></li>
      <li class="bottom-nav__item"><a href="chiefGear.html">Chief Gear</a></li>
      <li class="bottom-nav__item"><a href="fireCrystals.html">Fire Crystals</a></li>
      <li class="bottom-nav__item"><a href="warLaboratory.html" aria-current="page" class="is-active">War Academy</a></li>
      <li class="bottom-nav__item"><a href="pets.html">Pets</a></li>
      <li class="bottom-nav__item"><a href="experts.html">Experts</a></li>
    </ul>
  </nav>
  <a href="#top" class="back-to-top" aria-label="Back to top">&uarr;</a>
  <script>
    document.addEventListener('DOMContentLoaded', function(){
      const active = document.querySelector('.bottom-nav__item a.is-active, .bottom-nav__item a[aria-current="page"]');
      if(active && active.scrollIntoView){
        active.scrollIntoView({behavior:'auto', inline:'center', block:'nearest'});
      }
    });
  </script>
</body>
</html>
